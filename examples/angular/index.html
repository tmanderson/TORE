<!DOCTYPE html>
<html>
<head>
	<title>ANGULAR READS</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<link rel="stylesheet" type="text/css" href="/assets/css/main.css">
	<script src="https://www.google.com/jsapi"></script>
	<script>google.load('feeds', '1');</script>
	<!--
	<script src="/lib/oauth.js"></script>
	<script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/hmac-sha1.js"></script>
	<script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/components/enc-base64-min.js"></script>
	-->
</head>
<body ng-app="TORE">
	<aside ng-controller="SidebarController as sidebar" ng-class="{ settings: sidebar.editing }">
		<header ng-class="{ loading: sidebar.loading }">
			<h1>All Feeds</h1>

			<button class="button success" ng-click="sidebar.toggleSearch()" ng-class="{ active: sidebar.searching }">
				<span class="entypo-plus"></span>
			</button>

			<menu ng-class="{ results: sidebar.query }">
				<div ng-click="sidebar.saveFeed(feed);sidebar.toggleSearch(false)"
					ng-repeat="feed in sidebar.searchResults" ng-bind-html="feed.title">
				</div>
			</menu>

			<input
				type="text"
				placeholder="Search for a feed..."
				ng-model="sidebar.query"
				focus="{{ sidebar.searching }}"
				ng-keydown="$event.which==13 && sidebar.search($event) ||
				$event.which==27 && (sidebar.query ? sidebar.resetQuery() : sidebar.toggleSearch(false))"
			/>
		</header>

		<ul class="saved">
			<div ng-repeat="feed in sidebar.feeds" ng-click="main.toggleFeed(feed)" ng-class="{ active: feed.active }">
				<div class="settings">
					<button class="button error" ng-click="sidebar.removeFeed(feed); $event.stopPropagation();">
						<span class="entypo-cancel"></span>
					</button>
				</div>
				<div>
					<h2 ng-bind-html="feed.title"></h2>
					<span class="unread">{{ feed.unread }}</span>
				</div>
			</div>
		</ul>

		<footer>
			<button class="button" ng-click="sidebar.editing=!sidebar.editing">
				<span class="entypo-cog"></span>
			</button>
		</footer>
	</aside>

	<div ui-view></div>

	<script src="bower_components/angular/angular.js"></script>
	<script src="bower_components/angular-ui-router/release/angular-ui-router.js"></script>
	<script src="bower_components/lodash/dist/lodash.js"></script>
	<script src="bower_components/moment/moment.js"></script>
	<script src="bower_components/jquery/dist/jquery.js"></script>

	<script src="/src/app.js"></script>
	<!-- injector:js -->
	<script src="/src/main/feeds.service.js"></script>
	<script src="/src/main/focus.directive.js"></script>
	<script src="/src/main/main.controller.js"></script>
	<script src="/src/main/main.js"></script>
	<script src="/src/main/sidebar.controller.js"></script>
	<!-- endinjector -->
</body>
</html>
